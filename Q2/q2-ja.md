## Overview
このシステムでは以下の要件が必要である
* 大量の書き込み量を処理する：1日あたりのイベント数は10億を書き込み
* 最大1時間の遅延で顧客にメトリックを提供
* 最小限のダウンタイムで実行可能
* 処理ロジックにバグがある場合に履歴データを再処理する機能

## Backend
この規模のデータ量では、RDBで処理するには限界があります。<br>
RDBを用いて、<br>
レプリケーション・パーティショニングによるスケールアウトで対応する戦略を取るのではなく、<br>
KVSを利用します。

用途特化型でインデクシングを行うため、<br>
BackendにはKVSと全文検索エンジンを採用します。<br>
具体的には、ファクトデータとしてKVSを利用します。<br>
参照用のインデックスデータは全文検索エンジンを利用します。<br>
参照用のインデックス作成に多少のタイムラグがあっても問題がない場合、<br>
バッチ処理によってKVSのファクトデータを抽出し、<br>
インデックデータを作成します。<br>
これを参照する際にはウェブAPIなどでクエリします。<br>
インデックス作成を即座に行う必要がある場合、<br>
ファクトデータの登録・更新時に、即座にインデックスが作成されるような汎用フレームワークを独自に用意し、<br>
アプリケーション開発者の開発負荷軽減を行います。

## Architecture
マイクロサービスアーキテクチャーを採用し、<br>
各サービスの開発・運用スピードを高めます。<br>
また、問題があった際に最小限のダウンタイムでリカバリするため、<br>
サービス間にCircuit Breakerを利用することで、<br>
連携しているサービスがもし持続的に死んだ場合に、<br>
他のロジックを迂回して処理する。<br>
Gracefull shutdownも利用し、障害に強いシステムにします。
